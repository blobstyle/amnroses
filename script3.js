function autoPlay(){var s=$(settings.datesDiv).find("a."+settings.datesSelectedClass);"forward"==settings.autoPlayDirection?(s.parent().is("li:last-child")?$(settings.datesDiv+" li:first-child"):s.parent().next()).find("a").trigger("click"):"backward"==settings.autoPlayDirection&&(s.parent().is("li:first-child")?$(settings.datesDiv+" li:last-child"):s.parent().prev()).find("a").trigger("click")}jQuery.fn.timelinr=function(s){settings=jQuery.extend({orientation:"horizontal",containerDiv:"#timeline",datesDiv:"#dates",datesSelectedClass:"selected",datesSpeed:"normal",issuesDiv:"#issues",issuesSelectedClass:"selected",issuesSpeed:"fast",issuesTransparency:.2,issuesTransparencySpeed:500,prevButton:"#prev",nextButton:"#next",arrowKeys:"false",startAt:1,autoPlay:"false",autoPlayDirection:"forward",autoPlayPause:2e3},s),$(function(){var e,i,s,t,n,a,g,l,d,u;0<$(settings.datesDiv).length&&0<$(settings.issuesDiv).length&&(e=$(settings.datesDiv+" li").length,i=$(settings.issuesDiv+" li").length,$(settings.datesDiv).find("a."+settings.datesSelectedClass),$(settings.issuesDiv).find("li."+settings.issuesSelectedClass),s=$(settings.containerDiv).width(),t=$(settings.containerDiv).height(),$(settings.issuesDiv).width(),$(settings.issuesDiv).height(),n=$(settings.issuesDiv+" li").width(),a=$(settings.issuesDiv+" li").height(),$(settings.datesDiv).width(),$(settings.datesDiv).height(),g=$(settings.datesDiv+" li").width(),l=$(settings.datesDiv+" li").height(),"horizontal"==settings.orientation?($(settings.issuesDiv).width(n*i),$(settings.datesDiv).width(g*e).css("marginLeft",s/2-g/2),d=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px")))):"vertical"==settings.orientation&&($(settings.issuesDiv).height(a*i),$(settings.datesDiv).height(l*e).css("marginTop",t/2-l/2),d=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px")))),$(settings.datesDiv+" a").click(function(s){s.preventDefault();$(this).text();s=$(this).parent().prevAll().length;"horizontal"==settings.orientation?$(settings.issuesDiv).animate({marginLeft:-n*s},{queue:!1,duration:settings.issuesSpeed}):"vertical"==settings.orientation&&$(settings.issuesDiv).animate({marginTop:-a*s},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}).removeClass(settings.issuesSelectedClass).eq(s).addClass(settings.issuesSelectedClass).fadeTo(settings.issuesTransparencySpeed,1),1==e?$(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==e?$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?($(settings.prevButton).fadeOut("fast"),$(settings.nextButton).fadeIn("fast")):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&($(settings.nextButton).fadeOut("fast"),$(settings.prevButton).fadeIn("fast")):$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?($(settings.nextButton).fadeIn("fast"),$(settings.prevButton).fadeOut("fast")):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?($(settings.prevButton).fadeIn("fast"),$(settings.nextButton).fadeOut("fast")):$(settings.nextButton+","+settings.prevButton).fadeIn("slow"),$(settings.datesDiv+" a").removeClass(settings.datesSelectedClass),$(this).addClass(settings.datesSelectedClass),"horizontal"==settings.orientation?$(settings.datesDiv).animate({marginLeft:d-g*s},{queue:!1,duration:"settings.datesSpeed"}):"vertical"==settings.orientation&&$(settings.datesDiv).animate({marginTop:d-l*s},{queue:!1,duration:"settings.datesSpeed"})}),$(settings.nextButton).bind("click",function(s){s.preventDefault();var t,s=$(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index();"horizontal"==settings.orientation?(t=parseInt($(settings.issuesDiv).css("marginLeft").substring(0,$(settings.issuesDiv).css("marginLeft").indexOf("px"))),parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px"))),t<=-(n*i-n)?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:last-child a").click()):$(settings.issuesDiv).is(":animated")||$(settings.datesDiv+" li").eq(s+1).find("a").trigger("click")):"vertical"==settings.orientation&&(t=parseInt($(settings.issuesDiv).css("marginTop").substring(0,$(settings.issuesDiv).css("marginTop").indexOf("px"))),parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px"))),t<=-(a*i-a)?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:last-child a").click()):$(settings.issuesDiv).is(":animated")||$(settings.datesDiv+" li").eq(s+1).find("a").trigger("click")),1==e?$(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==e?$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?($(settings.prevButton).fadeOut("fast"),$(settings.nextButton).fadeIn("fast")):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&($(settings.nextButton).fadeOut("fast"),$(settings.prevButton).fadeIn("fast")):$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?$(settings.prevButton).fadeOut("fast"):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?$(settings.nextButton).fadeOut("fast"):$(settings.nextButton+","+settings.prevButton).fadeIn("slow")}),$(settings.prevButton).click(function(s){s.preventDefault();var t,s=$(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index();"horizontal"==settings.orientation?(t=parseInt($(settings.issuesDiv).css("marginLeft").substring(0,$(settings.issuesDiv).css("marginLeft").indexOf("px"))),parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px"))),0<=t?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:first-child a").click()):$(settings.issuesDiv).is(":animated")||$(settings.datesDiv+" li").eq(s-1).find("a").trigger("click")):"vertical"==settings.orientation&&(t=parseInt($(settings.issuesDiv).css("marginTop").substring(0,$(settings.issuesDiv).css("marginTop").indexOf("px"))),parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px"))),0<=t?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:first-child a").click()):$(settings.issuesDiv).is(":animated")||$(settings.datesDiv+" li").eq(s-1).find("a").trigger("click")),1==e?$(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==e?$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?($(settings.prevButton).fadeOut("fast"),$(settings.nextButton).fadeIn("fast")):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&($(settings.nextButton).fadeOut("fast"),$(settings.prevButton).fadeIn("fast")):$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?$(settings.prevButton).fadeOut("fast"):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?$(settings.nextButton).fadeOut("fast"):$(settings.nextButton+","+settings.prevButton).fadeIn("slow")}),"true"==settings.arrowKeys&&("horizontal"==settings.orientation?$(document).keydown(function(s){39==s.keyCode&&$(settings.nextButton).click(),37==s.keyCode&&$(settings.prevButton).click()}):"vertical"==settings.orientation&&$(document).keydown(function(s){40==s.keyCode&&$(settings.nextButton).click(),38==s.keyCode&&$(settings.prevButton).click()})),$(settings.datesDiv+" li").eq(settings.startAt-1).find("a").trigger("click"),"true"==settings.autoPlay&&(u=setInterval(autoPlay,settings.autoPlayPause),$(settings.containerDiv).hover(function(s){clearInterval(u)},function(s){u=setInterval(autoPlay,settings.autoPlayPause)})))})};